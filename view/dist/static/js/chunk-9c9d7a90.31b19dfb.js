(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9c9d7a90"],{1:function(e,t){},2:function(e,t){},3:function(e,t){},"38df":function(e,t,r){},"7e82":function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return l})),r.d(t,"b",(function(){return s})),r.d(t,"i",(function(){return o})),r.d(t,"f",(function(){return c})),r.d(t,"a",(function(){return u})),r.d(t,"h",(function(){return m})),r.d(t,"g",(function(){return p}));var a=r("b775");function n(e){return Object(a["a"])({url:"mail/getQueryAnnexOptions",method:"get"})}function i(e){return Object(a["a"])({url:"mail/getQueryAnnexOptionsLazy",method:"get",params:e})}function l(e){return Object(a["a"])({url:"mail/getQueryAnnexServernames",method:"get",params:e})}function s(e){return Object(a["a"])({url:"mail/getPlaformChannelToservername",method:"get",params:e})}function o(e){return Object(a["a"])({url:"mail/postMailToCreate",method:"post",data:e})}function c(e){return Object(a["a"])({url:"mail/query",method:"get",params:e})}function u(e){return Object(a["a"])({url:"mail/annexAllQuery",method:"get",params:e})}function m(e){return Object(a["a"])({url:"mail/mailSend",method:"post",data:e})}function p(e){return Object(a["a"])({url:"mail/maxID",method:"get",params:e})}},"7fac":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mail-container"},[r("div",{staticClass:"role-container-header"},[r("ul",{staticStyle:{"margin-top":"5px","margin-bottom":"-5px","margin-right":"10px"}},[r("li",[r("el-button",{staticClass:"button-with-header button-with-select",attrs:{slot:"reference",icon:"el-icon-refresh",size:"small"},on:{click:e.filterFormChange},slot:"reference"},[e._v("刷新")])],1),e._v(" "),r("li",[e.grade?r("el-button",{staticClass:"button-with-header button-with-select",attrs:{slot:"append",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:e.dialogFormchangeShowTrue},slot:"append"},[e._v("新建邮件")]):e._e()],1)])]),e._v(" "),r("div",{staticClass:"role-container-search"},[r("div",{staticClass:"server-container"},[e._v("ID：\n      "),r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入邮件ID",size:"small"},model:{value:e.filterForm["Id"],callback:function(t){e.$set(e.filterForm,"Id",t)},expression:"filterForm['Id']"}}),e._v(" "),r("el-button",{staticClass:"button-with-select",attrs:{slot:"append",icon:"el-icon-search",size:"small",name:"truesearch"},on:{click:function(t){return e.filterFormChange("click")}},slot:"append"})],1),e._v(" "),r("div",{staticClass:"comprehensive-container"},[e._l(e.selectForm,(function(t,a){return r("div",{key:a,staticClass:"select-item"},[e._v(" "+e._s(t.label)+":\n        "),r("el-select",{staticStyle:{"border-radius":"10px"},attrs:{multiple:t["multiple"],placeholder:"请选择",filterable:t.filterable,size:"small"},on:{change:function(t){return e.filterFormChange("change")}},model:{value:e.filterForm[t.key],callback:function(r){e.$set(e.filterForm,t.key,r)},expression:"filterForm[i.key]"}},e._l(t.options,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)})),e._v(" "),r("span",{staticStyle:{width:"3vw"}},[e._v("时间：")]),e._v(" "),r("el-date-picker",{attrs:{size:"small",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(t){return e.filterFormChange("change")}},model:{value:e.filterForm["createTime"],callback:function(t){e.$set(e.filterForm,"createTime",t)},expression:"filterForm['createTime']"}})],2)]),e._v(" "),r("div",{staticClass:"role-container-body",attrs:{id:"body"}},[r("el-table",{ref:"multipleTable",staticClass:"tableCssHeightSet",attrs:{border:"","highlight-current-row":"",fit:"",data:e.tableData}},[e._l(e.tablecolumn,(function(t,a){return r("el-table-column",{key:a,attrs:{label:t.label},scopedSlots:e._u([{key:"default",fn:function(a){return["string"===typeof a.row[t.prop]||"number"===typeof a.row[t.prop]?r("div",{attrs:{title:a.row[t.prop]}},[r("el-tooltip",{staticClass:"item",attrs:{effect:"light",placement:"top"}},[r("div",{attrs:{slot:"content"},slot:"content"},[r("span",[e._v(e._s(a.row[t.prop]))])])]),e._v(" "),r("span",[e._v(e._s(a.row[t.prop]))])],1):r("div",[r("el-tooltip",{staticClass:"aasdhjkahskdhjk",attrs:{effect:"light",placement:"top"}},[r("div",{ref:"contentCssTableHover"+a.$index,refInFor:!0,staticClass:"contentCssTableHover",attrs:{slot:"content"},slot:"content"},e._l(a.row[t.prop],(function(t,a){return r("el-tag",{key:a},[e._v(e._s(t))])})),1),e._v(" "),r("div",{staticClass:"contentCssTableHidden"},e._l(a.row[t.prop],(function(t,a){return r("el-tag",{key:a},[e._v(e._s(t))])})),1)])],1)]}}],null,!0)})})),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{staticClass:"button-with-header button-with-select",attrs:{slot:"append",icon:"el-icon-delete-solid",size:"small"},on:{click:e.dialogFormchangeShowTrue},slot:"append"},[e._v("停用")])]}}])})],2)],1),e._v(" "),r("div",{staticClass:"role-container-bottom"},[r("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"page-size":e.filterForm["pagesize"],"page-sizes":[50,100,150,200],background:"",layout:"total, sizes, prev, pager, next, jumper","pager-count":9,"hide-on-single-page":!1,total:e.total,"current-page":e.filterForm.page},on:{"update:pageSize":function(t){return e.$set(e.filterForm,"pagesize",t)},"update:page-size":function(t){return e.$set(e.filterForm,"pagesize",t)},"update:currentPage":function(t){return e.$set(e.filterForm,"page",t)},"update:current-page":function(t){return e.$set(e.filterForm,"page",t)},"size-change":function(t){return e.filterFormChange("pagechange")},"current-change":function(t){return e.filterFormChange("pagechange")}}})],1),e._v(" "),r("el-dialog",{ref:"newMailelDialog",staticClass:"announceddialog",attrs:{title:"新建邮件",visible:e.dialogFormchange,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormchange=t},close:e.createFormMailCancel}},[r("div",{staticClass:"container"},[r("div",[r("el-form",{ref:"createFormRulesLeft",staticClass:"demo-ruleForm",attrs:{model:e.createFormMail,"status-icon":"",rules:e.createFormRulesLeft,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"邮件标题",prop:"title"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.createFormMail.title,callback:function(t){e.$set(e.createFormMail,"title",t)},expression:"createFormMail.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮件正文",prop:"text"}},[r("el-input",{attrs:{type:"textarea",rows:6,autocomplete:"off"},model:{value:e.createFormMail.text,callback:function(t){e.$set(e.createFormMail,"text",t)},expression:"createFormMail.text"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"全服邮件"}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.createFormMailallServerTrueChange},model:{value:e.createFormMail.allServerTrue,callback:function(t){e.$set(e.createFormMail,"allServerTrue",t)},expression:"createFormMail.allServerTrue"}})],1)],1)],1),e._v(" "),r("div",[r("el-form",{ref:"createFormRulesRight",staticClass:"demo-ruleForm",attrs:{model:e.createFormMail,"status-icon":"",rules:e.createFormRulesRight,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"邮件链接"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.createFormMail.mailLink,callback:function(t){e.$set(e.createFormMail,"mailLink",t)},expression:"createFormMail.mailLink"}})],1),e._v(" "),e.createFormMail.allServerTrue?r("el-form-item",{attrs:{label:"服务器:",prop:"serverName"}},[r("el-select",{staticStyle:{"border-radius":"10px"},attrs:{value:"",filterable:"",multiple:"",placeholder:"请选择",size:"small"},model:{value:e.createFormMail.serverName,callback:function(t){e.$set(e.createFormMail,"serverName",t)},expression:"createFormMail.serverName"}},e._l(e.servernamesselect,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),r("el-button",{directives:[{name:"show",rawName:"v-show",value:e.createFormMail.allServerTrue,expression:"createFormMail.allServerTrue"}],staticClass:"allSelectButton",attrs:{type:"primary"},on:{click:e.allSelectAllServer}},[e._v("全 选")])],1):r("el-form-item",{attrs:{label:"人员名单:",prop:"serverName"}},[r("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",action:"#",accept:".xlsx,.xls","auto-upload":!0,"file-list":e.filelist,limit:1,multiple:"","http-request":e.fileUpload}},[r("i",{staticClass:"el-icon-upload"}),e._v(" "),r("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),r("em",[e._v("点击上传")])]),e._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传xlsx/xls文件")])])],1),e._v(" "),r("el-form-item",{attrs:{label:"发送方式 :",prop:"serverName"}},[r("el-radio",{attrs:{label:!0},model:{value:e.createFormMail["sendTime"],callback:function(t){e.$set(e.createFormMail,"sendTime",t)},expression:"createFormMail['sendTime']"}},[e._v("即时发送")]),e._v(" "),r("el-radio",{attrs:{label:!1},model:{value:e.createFormMail["sendTime"],callback:function(t){e.$set(e.createFormMail,"sendTime",t)},expression:"createFormMail['sendTime']"}},[e._v("定时发送")]),e._v(" "),r("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:!e.createFormMail["sendTime"],expression:"!createFormMail['sendTime']"}],attrs:{type:"datetime","picker-options":{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},placeholder:"选择日期时间"},model:{value:e.createFormMail["sendDateTime"],callback:function(t){e.$set(e.createFormMail,"sendDateTime",t)},expression:"createFormMail['sendDateTime']"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"携带附件",prop:"pass"}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.createFormMail.carryAnnex,callback:function(t){e.$set(e.createFormMail,"carryAnnex",t)},expression:"createFormMail.carryAnnex"}})],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.createFormMail.carryAnnex,expression:"createFormMail.carryAnnex"}],attrs:{prop:"pass"}},[r("el-form",{ref:"createFormRulesRight",attrs:{model:e.createFormMail,"status-icon":"",rules:e.createFormRulesRight}},e._l(e.annexList,(function(t,a){return r("el-form-item",{key:a,staticClass:"annexList",attrs:{prop:"pass"}},[r("el-row",{staticStyle:{"margin-top":"1px"}},[r("el-col",{attrs:{span:10}},[r("el-cascader",{attrs:{"show-all-levels":!1,props:e.annexProps,options:e.annexOptions},model:{value:e.annexList[a]["annexName"],callback:function(t){e.$set(e.annexList[a],"annexName",t)},expression:"annexList[index]['annexName']"}})],1),e._v(" "),r("el-col",{attrs:{span:5}},[r("el-input",{attrs:{placeholder:"数量",autocomplete:"off"},model:{value:e.annexList[a]["annexNumber"],callback:function(t){e.$set(e.annexList[a],"annexNumber",t)},expression:"annexList[index]['annexNumber']"}})],1),e._v(" "),r("el-col",{attrs:{span:2}},[r("i",{staticClass:"el-icon-remove",staticStyle:{"font-size":"200%",position:"absolute",top:"15%",bottom:"15%"},on:{click:function(t){return e.annexListCut(a)}}})])],1)],1)})),1),e._v(" "),r("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"200%","margin-top":"5px"},on:{click:e.annexListAdd}})],1)],1)],1)]),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.createFormMailCancel}},[e._v("取 消")]),e._v(" "),r("el-button",{staticClass:"allSelectButton",attrs:{type:"primary"},on:{click:e.createFormMailSubmit}},[e._v("确 定")])],1)])],1)},n=[],i=(r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("7f7f"),r("ac6a"),r("c5f6"),r("6b54"),r("b54a"),r("96cf"),r("1da1")),l=r("74eb"),s=r("7e82"),o=r("5a0c"),c=r.n(o),u=r("1146"),m=r.n(u);function p(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=f(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(s)throw i}}}}function f(e,t){if(e){if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var d={name:"rolequery",data:function(){var e,t,r,a,n;return e=t=r=a=n=function(e,t,r){if(!t)return r(new Error("请至少输入一个字符"));r()},{sendMailTimingdialogDateTime:"",sendMailTimingdialogrow:"",updateFormMail:"",mailLink:r,title:e,exceldata:"",text:t,age:a,filelist:[],serverName:n,serverCreatedialogFormVisible:!1,sendMailTimingdialog:!1,dialogFormchange:!1,dialogFormUpdate:!1,createLock:!1,annexProps:{lazy:!0,lazyLoad:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.label,e.next=3,Object(s["d"])({label:a});case 3:n=e.sent,i=n.data,r(i);case 6:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},multipleTable:"",total:0,createFormMail:{title:"",text:"",allServerTrue:!1,roleId:"",sendTime:!0,mailLink:"",plaform:"",channel:"",serverName:"",carryAnnex:!1,sendDateTime:""},filterForm:{Id:"",plaform:"",channel:"",annex:"",serverName:"",createTime:"",page:1,pagesize:50},selectForm:[{label:"平台",multiple:!1,filterable:!1,key:"plaform",value:"",options:[{label:"不限制",value:""},{label:"安卓",value:"1"},{label:"苹果",value:"2"}]},{label:"客户端",filterable:!1,key:"channel",multiple:!0,value:"",options:[]},{label:"服务器",key:"servername",filterable:!0,multiple:!0,value:"",options:[{label:"不限制",value:""}]},{label:"附件",key:"annex",filterable:!0,multiple:!0,value:"",options:[{label:"不限制",value:""}]}],tableData:[],annexOptions:[],annexList:[{annexName:"",annexNumber:""}],servernamesselect:[],tablecolumn:[{label:"邮件ID",prop:"id"},{label:"邮件标题",prop:"title"},{label:"平台",prop:"plaform"},{label:"客户端",prop:"channel"},{label:"区服名",prop:"servernames"},{label:"玩家ID",prop:"roleid",list:"roleidListToJson"},{label:"邮件内容",prop:"text"},{label:"附件",prop:"annexnames"},{label:"发送时间",prop:"sendtime"}]}},watch:{},computed:{grade:function(){return 0!==this.$route.meta.grade},createFormRulesRight:function(){return{mailLink:[{validator:this.mailLink,trigger:["blur"]}],text:[{validator:this.text,trigger:["blur"]}]}},createFormRulesLeft:function(){return this.createFormMail.allServerTrue?{title:[{validator:this.title,trigger:["blur"]}],text:[{validator:this.text,trigger:["blur"]}]}:{title:[{validator:this.title,trigger:["blur"]}],text:[{validator:this.text,trigger:["blur"]}],roleId:[{validator:this.age,trigger:["blur"]}]}}},methods:{fileUpload:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=function(e,t){t.createFormMail["roleId"]=e},r=t.file,a=new FileReader,a.onload=function(e){try{var t,r=e.target.result,a=m.a.read(r,{type:"binary"});for(var l in a.Sheets){t=m.a.utils.sheet_to_json(a.Sheets[l]);break}n(t,i)}catch(s){i.$message.warning("文件不正确！")}},a.readAsBinaryString(r);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),allSelectAllServer:function(){this.createFormMail["serverName"]=this.servernamesselect.map((function(e){return e["value"]}))},dialogFormUpdateCancel:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.dialogFormUpdate=!1;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),sendMailTimingSubmit:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,i,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.sendMailTimingdialogDateTime,t){e.next=4;break}return this.$message.warning("请选择时间"),e.abrupt("return");case 4:return t=c()(t).format("YYYY-MM-DD HH:mm:ss"),e.next=7,this.$confirm("是否在".concat(t,"发送?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return!1}));case 7:if(r=e.sent,r){e.next=10;break}return e.abrupt("return");case 10:return a=this.sendMailTimingdialogrow,a["theway"]=!1,a["sendtime"]=t,e.next=15,Object(s["h"])(a);case 15:n=e.sent,i=n.code,l=n.message,200===i?(this.$message.success("发布成功"),this.sendMailTimingdialog=!1,this.sendMailTimingdialogrow=""):this.$message.warning(l);case 19:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),createFormMailCancel:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.dialogFormchange=!1,this.annexList=[{annexName:"",annexNumber:""}],this.createFormMail={title:"",text:"",allServerTrue:!1,roleId:"",mailLink:"",plaform:"",channel:"",serverName:"",carryAnnex:!1,sendTime:!0},this.$refs["createFormRulesLeft"].resetFields(),this.$refs["createFormRulesRight"].resetFields();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mailmessageChange:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.dialogFormUpdate=!0,this.updateFormMail=JSON.parse(JSON.stringify(r)),this.updateFormMail["mailLink"]=r.link,this.updateFormMail["roleId"]=r["roleid"];case 4:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),mailmessageSend:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r,a){var n,i,l,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=8;break}return e.next=3,this.$confirm("是否确认立即发送?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return!1}));case 3:if(n=e.sent,n){e.next=6;break}return e.abrupt("return");case 6:e.next=12;break;case 8:return this.sendMailTimingdialogrow=r,this.sendMailTimingdialogDateTime="",this.sendMailTimingdialog=!0,e.abrupt("return");case 12:return r["theway"]=a,e.next=15,Object(s["h"])(r);case 15:i=e.sent,l=i.code,o=i.message,200===l?this.$message.success("发布成功"):this.$message.warning(o);case 19:case"end":return e.stop()}}),e,this)})));function t(t,r,a){return e.apply(this,arguments)}return t}(),plaformChannelToservername:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.createFormMail["plaform"],r=this.createFormMail["channel"],this.createFormMail.serverName="",!t||!r.length){e.next=10;break}return e.next=6,Object(s["b"])({plaform:t,channel:r});case 6:return a=e.sent,n=a.data,this.servernamesselect=n,e.abrupt("return");case 10:this.servernamesselect="";case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),createFormMailallServerTrueChange:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.servernamesselect="",this.createFormMail.serverName="",!this.createFormMail.allServerTrue){e.next=9;break}return e.next=5,Object(s["e"])();case 5:return t=e.sent,r=t.data,this.servernamesselect=r,e.abrupt("return");case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),dialogFormchangeShowTrue:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,i,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.dialogFormchange=!0,t=new Date,e.next=4,Object(s["g"])();case 4:return r=e.sent,a=r.data,a["max"]=a["max"]?a["max"]:1,this.createFormMail["smtpId"]=t.getMinutes().toString()+t.getSeconds().toString()+a["max"],e.next=10,Object(s["c"])();case 10:n=e.sent,i=n.code,l=n.data,200===i&&(this.annexOptions=l),this.$refs["createFormRulesLeft"].resetFields(),this.$refs["createFormRulesRight"].resetFields();case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),annexListAdd:function(){var e=this.annexList[this.annexList.length-1];e["annexName"]&&e["annexNumber"]?this.annexList.push({annexName:"",annexNumber:""}):this.$message.warning("请填写完整"),this.$refs["newMailelDialog"].$el.scrollTo({top:this.$refs["newMailelDialog"].$el.scrollHeight+100,behavior:"smooth"})},annexListCut:function(e){1!==this.annexList.length?this.annexList.splice(e,1):this.$message.warning("必须有一条记录。")},createFormMailSubmit:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,i,l,o,c,u,m,f,h,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.8)"}),e.next=3,this.$refs["createFormRulesRight"].validate().catch((function(e){return!1}));case 3:return r=e.sent,e.next=6,this.$refs["createFormRulesLeft"].validate().catch((function(e){return!1}));case 6:if(a=e.sent,this.createFormMail.allServerTrue&&(this.createFormMail.roleId="",this.createFormMail.channel="",this.createFormMail.plaform=""),r&&a){e.next=11;break}return t.close(),e.abrupt("return");case 11:if(!this.createFormMail.allServerTrue||0!==this.createFormMail.serverName.length){e.next=15;break}return this.$message.warning("请选择区服"),t.close(),e.abrupt("return");case 15:if(this.createFormMail["sendTime"]||this.createFormMail["sendDateTime"]){e.next=19;break}return this.$message.warning("请选择发送时间"),t.close(),e.abrupt("return");case 19:if(n=[],!this.createFormMail.carryAnnex){e.next=46;break}i=p(this.annexList),e.prev=22,i.s();case 24:if((l=i.n()).done){e.next=37;break}if(o=l.value,o.annexName&&o.annexNumber){e.next=30;break}return this.$message.warning("附件不完整。"),t.close(),e.abrupt("return");case 30:if(/^[0-9]*$/.test(o["annexNumber"])){e.next=34;break}return this.$message.warning("附件数据不合法,"),t.close(),e.abrupt("return");case 34:n.push({ID:o.annexName.slice(-1)[0],name:o.annexName[0],number:o.annexNumber});case 35:e.next=24;break;case 37:e.next=42;break;case 39:e.prev=39,e.t0=e["catch"](22),i.e(e.t0);case 42:return e.prev=42,i.f(),e.finish(42);case 45:this.createFormMail["Annex"]=this.createFormMail.carryAnnex?n:"";case 46:return e.next=48,this.$confirm("是否确认立即发送?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return!1}));case 48:if(c=e.sent,c){e.next=52;break}return t.close(),e.abrupt("return");case 52:return e.next=54,Object(s["i"])(this.createFormMail);case 54:if(u=e.sent,m=u.code,f=u.message,h=u.data,200!==m){e.next=66;break}for(d in this.$message.success(f+",您创建邮件的ID是   ".concat(h.id)),this.createFormMail)this.createFormMail[d]="";return this.dialogFormchange=!1,t.close(),this.annexList=[{annexName:"",annexNumber:""}],this.createFormMail["mailLink"]="",this.createFormMail["carryAnnex"]=!1,this.createFormMail["allServerTrue"]=!1,e.abrupt("return");case 66:t.close(),this.$message.info("创建失败!");case 68:case"end":return e.stop()}}),e,this,[[22,39,42,45]])})));function t(){return e.apply(this,arguments)}return t}(),filterFormChange:function(e){switch(e){case"click":this.filterFormChangeClick();break;case"change":this.filterFormChangeChange();break;case"pagechange":this.filterFormChangeChange();break;default:this.filterFormChangeFlush()}},filterFormChangeFlush:function(){for(var e in this.filterForm)this.filterForm[e]="";this.filterForm["pagesize"]=50,this.filterForm["page"]=1,this.tableData=[],this.total=0},filterFormChangeClick:function(){for(var e in this.filterForm)"Id"!==e&&"pagesize"!==e&&"page"!==e&&(this.filterForm[e]="");this.filterFormChangeSubmit()},filterFormChangeChange:function(){this.filterForm["Id"]="",this.filterFormChangeSubmit()},filterFormChangeSubmit:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["f"])(this.filterForm);case 2:t=e.sent,r=t.code,a=t.data,200!==r&&(this.$message.warning("查找失败"),this.tableData=[]),n=a.data,i=a.total,n.map((function(e){e.plaform=1===+e.plaform?"安卓":2===+e.plaform?"苹果":"不限制",e.sendtime=e.sendtime?c()(e.sendtime).format("YYYY-MM-DD HH:mm:ss"):"未发送"})),this.tableData=n,this.total=Number(i);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["b"])({code:"areaclothing",gameid:this.gameid});case 2:return t=e.sent,r=t.data.values.map((function(e){return{label:e,value:e}})),this.selectForm[1].options=this.selectForm[1].options.concat(r),this.clientOptions=r,e.next=8,Object(s["e"])();case 8:return a=e.sent,n=a.data,this.selectForm[2].options=this.selectForm[2].options.concat(n),e.next=13,Object(s["a"])();case 13:i=e.sent,o=i.data,this.selectForm[3].options=this.selectForm[3].options.concat(o);case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},g=d,v=(r("a798"),r("2877")),b=Object(v["a"])(g,a,n,!1,null,null,null);t["default"]=b.exports},a798:function(e,t,r){"use strict";var a=r("38df"),n=r.n(a);n.a}}]);